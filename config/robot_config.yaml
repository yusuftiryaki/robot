# OBA Konfigürasyon Dosyası
robot:
  name: "OBA_Bahce_Asistani"
  version: "1.0.0"
  debug_mode: false

# Hardware Pin Konfigürasyonları
hardware:
  motors:
    left_wheel:
      pin_a: 18
      pin_b: 19
      encoder_pin: 20
      max_speed: 255
    right_wheel:
      pin_a: 21
      pin_b: 22
      encoder_pin: 23
      max_speed: 255
    main_brush:
      pin_a: 24
      pin_b: 25
      max_speed: 200
    side_brush_left:
      pin_a: 26
      pin_b: 27
      max_speed: 150
    side_brush_right:
      pin_a: 5
      pin_b: 6
      max_speed: 150
    fan:
      pin_a: 12
      pin_b: 13
      max_speed: 180

  sensors:
    mpu6050:
      i2c_address: 0x68
      sda_pin: 2
      scl_pin: 3
      sample_rate: 50 # Hz

    gps:
      uart_tx: 14
      uart_rx: 15
      baud_rate: 9600

    camera:
      port: 0
      resolution: [640, 480]
      framerate: 30

    front_bumper:
      pin: 16
      pull_up: true

    ina219:
      i2c_address: 0x40
      sda_pin: 2
      scl_pin: 3

# Navigasyon Ayarları
navigation:
  wheel_diameter: 0.065 # metre
  wheel_base: 0.235 # metre (tekerlekler arası mesafe)
  max_speed: 0.5 # m/s
  max_angular_speed: 1.0 # rad/s

  # Kalman Filter parametreleri
  kalman:
    process_noise: 0.1
    measurement_noise: 0.5

  # Path planning
  path_planning:
    grid_resolution: 0.1 # metre
    obstacle_padding: 0.2 # metre

# Görev Yönetimi
missions:
  mowing:
    pattern: "boustrophedon" # biçerdöver metodu
    overlap: 0.1 # metre
    speed: 0.3 # m/s

    # Bahçe sınır koordinatları (GPS lat/lon)
    boundary_coordinates:
      # Koordinatlar saat yönünde verilmeli (polygon için)
      - latitude: 39.933500 # Kuzey-batı köşe
        longitude: 32.859500
      - latitude: 39.933600 # Kuzey-doğu köşe
        longitude: 32.859900
      - latitude: 39.933300 # Güney-doğu köşe
        longitude: 32.859850
      - latitude: 39.933200 # Güney-batı köşe
        longitude: 32.859450

    # Güvenlik parametreleri
    boundary_safety:
      buffer_distance: 1.0 # metre - sınırdan ne kadar uzak durulsun
      warning_distance: 2.0 # metre - uyarı mesafesi
      max_deviation: 0.5 # metre - GPS hata toleransı
      check_frequency: 10 # saniye - sınır kontrol sıklığı

  charging:
    battery_low_threshold: 20 # %
    battery_full_threshold: 95 # %
    dock_approach_speed: 0.1 # m/s

    # Şarj istasyonu GPS koordinatları
    dock_gps:
      latitude: 39.933400 # Ankara Kızılay (örnek)
      longitude: 32.859742
      altitude: 850.0 # deniz seviyesinden yükseklik (metre)
      accuracy_radius: 3.0 # GPS hata payı (metre)

    # Şarj istasyonu yaklaşım parametreleri
    approach:
      gps_range: 10.0 # GPS ile 10m yaklaştığında kamera devreye girer
      final_range: 2.0 # Son 2m kamera + sensörlerle
      precision_range: 0.5 # Son 50cm hassas yerleştirme

    # AprilTag destekli hassas yaklaşım
    apriltag:
      sarj_istasyonu_tag_id: 0 # Şarj istasyonu AprilTag ID'si
      tag_boyutu: 0.08 # AprilTag boyutu (metre) - 8cm (küçük)
      hedef_mesafe: 0.25 # Hedef mesafe (metre) - 25cm
      hassas_mesafe: 0.08 # Hassas mesafe (metre) - 8cm
      aci_toleransi: 5.0 # Açı toleransı (derece)
      pozisyon_toleransi: 0.02 # Pozisyon toleransı (metre) - 2cm
      yaklasim_hizi: 0.1 # Yaklaşım hızı (m/s)
      hassas_hiz: 0.02 # Hassas hız (m/s)
      donme_hizi: 0.2 # Dönme hızı (rad/s)

      # Kamera kalibrasyonu (örnek değerler - kalibrasyon gerekli)
      kamera_matrix:
        - [640, 0, 320]
        - [0, 640, 240]
        - [0, 0, 1]
      distortion_coeffs: [0, 0, 0, 0, 0] # Distortion coefficients

      # INA219 güç sensörü parametreleri
      sarj_akimi_esigi: 0.1 # Şarj akımı eşiği (Amper)
      baglanti_voltaj_esigi: 11.0 # Bağlantı voltaj eşiği (Volt)

# Web Arayüzü
web:
  host: "0.0.0.0"
  port: 5000
  secret_key: "haci_abi_secret_2024"

# Güvenlik
safety:
  emergency_stop_pin: 17
  max_tilt_angle: 30 # derece
  obstacle_distance: 0.3 # metre
  watchdog_timeout: 5 # saniye

# Logging
logging:
  level: "INFO"
  console:
    enabled: true
    colored: true
    format: "%(asctime)s | %(name)s | %(levelname)s | %(message)s"
  file:
    enabled: true
    path: "logs"
    filename: "robot.log"
    max_size: "10MB"
    backup_count: 5
    rotation: "size"
